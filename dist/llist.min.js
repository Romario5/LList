function LList(){this.first=null;this.last=null;this.length=0}LList.prototype={constructor:LList};function LLItem(data){this.next=null;this.prev=null;this.data=data===undefined?null:data;this.list=null}LList.prototype.push=function(data){var newItem=new LLItem(data);newItem.list=this;this.length++;if(this.first===null){this.first=newItem;this.last=newItem}else{newItem.prev=this.last;this.last.next=newItem;this.last=newItem}return this.length};LList.prototype.unshift=function(data){var newItem=new LLItem(data);newItem.list=this;this.length++;if(this.first===null){this.first=newItem;this.last=newItem}else{newItem.next=this.first;this.first.prev=newItem;this.first=newItem}return this.length};LList.prototype.pop=function(){if(this.last===null)return 0;this.last.prev.next=null;this.last=this.last.prev;this.length--;return this.length};LList.prototype.shift=function(){if(this.first===null)return 0;this.first.next.prev=null;this.first=this.first.next;this.length--;return this.length};LList.prototype.asArray=function(){var result=[];var item=this.first;while(item!==null){result.push(item.data);item=item.next}return result};LList.prototype.item=function(index){if(this.first===null)return null;if(index>this.length||this.length===1)return this.last;var i,item;if(index<0){i=1;var absIndex=Math.abs(index);item=this.last;while(item!==null){if(i===absIndex)return item;item=item.prev;i++}}else if(index<this.length/2){i=0;item=this.first;while(item!==null){if(i===index)return item;item=item.next;i++}}else{i=this.length-1;item=this.last;while(item!==null){if(i===index)return item;item=item.prev;i--}}return null};LList.prototype.data=function(index){var item=this.item(index);if(item!==null)return item.data;return null};LList.prototype.map=function(func){var index=0,result=new LList,item=this.first;if(typeof func!=="function"){console.warn("LList.map: Function is required as argument, but "+typeof func+" is given.");return result}while(item!==null){result.push(func.call(item,item.data,index,this));item=item.next;index++}return result};LList.prototype.withEach=function(func){var index=0,item=this.first,result;if(typeof func!=="function"){console.warn("LList.withEach: Function is required as argument, but "+typeof func+" is given.");return this}while(item!==null){result=func.call(item,item.data,index,this);if(result!==undefined)item.data=result;item=item.next;index++}return this};LLItem.prototype.delete=function(){if(this.prev!==null)this.prev.next=this.next;if(this.next!==null)this.next.prev=this.prev;if(this.list.first===this)this.list.first=this.next;if(this.list.last===this)this.list.last=this.prev;delete this.next;delete this.prev;return--this.list.length};LList.prototype.delete=function(index){var item=this.item(index);if(item!==null)item.delete();return this.length};LList.prototype.indexOf=function(data){var item=this.first,index=0;while(item!==null){if(item.data===data)return index;item=item.next;index++}return-1};LList.prototype.has=function(data){return this.indexOf(data)>=0};if(typeof module!=="undefined")module.exports=LList;